import { MigrationInterface, QueryRunner } from "typeorm";

export class AddMoreColumnsToMultaCacheEntity1757005015250 implements MigrationInterface {
    name = 'AddMoreColumnsToMultaCacheEntity1757005015250'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`CREATE TABLE "juridico_multas_cache" ("id" SERIAL NOT NULL, "codigo_multa" character varying(50) NOT NULL, "numero_ait" character varying(50), "data_emissao" TIMESTAMP NOT NULL, "data_vencimento" TIMESTAMP, "valor_multa" numeric(10,2), "valor_pago" numeric(10,2), "valor_saldo" numeric(10,2), "local_infracao" text, "situacao_multa" character varying(50), "observacoes" text, "responsavel" character varying(100), "codigo_veiculo" character varying(20), "prefixo_veiculo" character varying(20), "placa_veiculo" character varying(10), "codigo_garagem" integer, "nome_garagem" character varying(50), "codigo_infracao" character varying(20), "descricao_infracao" text, "valor_infracao" numeric(10,2), "pontuacao_infracao" integer, "gravidade_infracao" character varying(20), "codigo_agente" character varying(20), "nome_agente" character varying(100), "matricula_agente" character varying(20), "status_multa" character varying(30), "dias_vencimento" integer, "prioridade_cobranca" character varying(20), "cod_int_func" character varying(20), "codigo_uf" character varying(5), "cod_munic" character varying(10), "codigo_org" character varying(10), "numero_local_multa" character varying(50), "data_hora_multa" TIMESTAMP, "total_parcelas_multa" integer, "valor_total_multa" numeric(10,2), "data_pagto_multa" TIMESTAMP, "numero_recurso_multa" character varying(50), "data_recurso_multa" TIMESTAMP, "condicao_recurso_multa" character varying(10), "numero_recurso_multa2" character varying(50), "data_recurso_multa2" TIMESTAMP, "condicao_recurso_multa2" character varying(10), "numero_recurso_multa3" character varying(50), "data_recurso_multa3" TIMESTAMP, "condicao_recurso_multa3" character varying(10), "data_autorizado" TIMESTAMP, "autorizado" character varying(5), "decl_impresso_multa" character varying(5), "documento" character varying(100), "data_pagamento_prev" TIMESTAMP, "vlr_acrescimo" numeric(10,2), "vlr_desconto" numeric(10,2), "valor_pagamento" numeric(10,2), "codigo_forn" character varying(20), "cod_lanca" character varying(20), "id_prest2" character varying(20), "cod_doc_tocpg" character varying(20), "cod_int_pro_aut" character varying(20), "data_limite_condutor" TIMESTAMP, "cod_motivo_notificacao" character varying(20), "cod_area_competencia" character varying(20), "cod_responsavel_notificacao" character varying(20), "cod_agente_autuador" character varying(20), "cod_int_linha" character varying(20), "codlinha" character varying(20),"flg_prim_parcela_paga" character varying(5), "entrada_vencimento" TIMESTAMP, "entrada_pagamento" TIMESTAMP, "auto_de_infracao" character varying(50), "auto_de_infracao_emissao" TIMESTAMP, "auto_de_infracao_recebimento" TIMESTAMP, "auto_de_infracao_considerado" character varying(5), "auto_de_infracao_valor_do_doc" numeric(10,2), "auto_de_infracao_valor_considerado" numeric(10,2), "auto_de_infracao_prazo" integer, "notificacao1" character varying(50), "notificacao1_emissao" TIMESTAMP, "notificacao1_recebimento" TIMESTAMP, "notificacao1_considerado" character varying(5), "notificacao1_valor_do_doc" numeric(10,2), "notificacao1_valor_considerado" numeric(10,2), "notificacao1_prazo" integer, "notificacao2" character varying(50), "notificacao2_emissao" TIMESTAMP, "notificacao2_recebimento" TIMESTAMP, "notificacao2_considerado" character varying(5), "notificacao2_valor_do_doc" numeric(10,2), "notificacao2_valor_considerado" numeric(10,2), "notificacao2_prazo" integer, "notificacao3" character varying(50), "notificacao3_emissao" TIMESTAMP, "notificacao3_recebimento" TIMESTAMP, "notificacao3_considerado" character varying(5), "notificacao3_valor_do_doc" numeric(10,2), "notificacao3_valor_considerado" numeric(10,2), "notificacao3_prazo" integer, "valor_atualizado" numeric(10,2), "pgto_intemp_data" TIMESTAMP, "pgto_intemp_valor" numeric(10,2), "pgto_intemp_venc" TIMESTAMP, "dep_jud_data" TIMESTAMP, "dep_jud_valor" numeric(10,2), "dep_jud_dt_recup" TIMESTAMP, "dep_jud_vlr_recup" numeric(10,2), "dep_jud_venc" TIMESTAMP, "numero_processo" character varying(50), "parc_valor" numeric(10,2), "parc_total_parcelas" integer, "parc_valor_parcelas" numeric(10,2), "ent_vencimento" TIMESTAMP, "ent_pagamento" TIMESTAMP, "ent_valor" numeric(10,2), "par_vencimento" TIMESTAMP, "par_pagamento" TIMESTAMP, "par_valor" numeric(10,2), "ult_par_vencimento" TIMESTAMP, "ult_par_pagamento" TIMESTAMP, "ult_par_valor" numeric(10,2), "total_pago" numeric(10,2), "recuso" character varying(5), "anistia" character varying(5), "instancia_envio1" TIMESTAMP, "instancia_publicacao_do1" TIMESTAMP, "instancia_envio2" TIMESTAMP, "instancia_publicacao_do2" TIMESTAMP, "instancia_envio3" TIMESTAMP, "instancia_publicacao_do3" TIMESTAMP, "integrou_por_vencimento" character varying(5), "valor_julgado" numeric(10,2), "codigo_recuperacao" character varying(20), "n_processo_notificacao" character varying(50), "cod_causa_principal" character varying(20), "env_penalidade" character varying(5), "rev_penalidade" character varying(5), "obs_notificacao" text, "recuperada" character varying(5), "palavra_chave" character varying(100), "tratamento_multa" character varying(50), "importacao_ok" character varying(5), "tipo_de_trecho" character varying(50), "reembolsavel" character varying(5), "km_local_multa" numeric(10,3), "metros_local_multa" numeric(10,2), "sentido_local_multa" character varying(50), "bairro_local_multa" character varying(100), "observacao_real_motivo" text, "tipo_tratamento_multa" character varying(50), "executor" character varying(100), "executor_cnpj_cpf" character varying(20), "ult_alteracao" TIMESTAMP, "ocorrencia" character varying(100), "codigo_ressarc" character varying(20), "flg_smartec" character varying(5), "data_imp_smartec" TIMESTAMP, "url_formulario" text, "url_boleto" text, "flg_smartec_multa" character varying(5), "reincidencia" character varying(5), "grupo_infracao" character varying(50), "cod_org_original" character varying(20), "ait_original" character varying(50), "tipo_fiscalizacao" character varying(10), "codigo_equipamento" character varying(50), "numero_equipamento" character varying(100), "data_hora_fiscalizacao" TIMESTAMP, "renavan" character varying(20), "chassi" character varying(25), "latitude_local" numeric(10,7), "longitude_local" numeric(10,7), "numero_boletim" character varying(50), "orgao_autuador_cod" character varying(20), "orgao_autuador_desc" character varying(100), "data_cache" TIMESTAMP NOT NULL DEFAULT now(), "origem_dados" character varying(20) NOT NULL DEFAULT 'ORACLE', "created_at" TIMESTAMP NOT NULL DEFAULT now(), "updated_at" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "PK_cc28a1b4cb3cc3337ca94f62b95" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_340d772d5690e0e5c78c5323e8" ON "juridico_multas_cache" ("data_cache") `);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_01286d3dc29ba15ea3ce0a5d28" ON "juridico_multas_cache" ("codigo_multa") `);
        await queryRunner.query(`CREATE INDEX "IDX_af1e1608440f2158a000c1613a" ON "juridico_multas_cache" ("data_emissao", "prefixo_veiculo") `);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`DROP INDEX "public"."IDX_af1e1608440f2158a000c1613a"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_01286d3dc29ba15ea3ce0a5d28"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_340d772d5690e0e5c78c5323e8"`);
        await queryRunner.query(`DROP TABLE "juridico_multas_cache"`);
    }

}
